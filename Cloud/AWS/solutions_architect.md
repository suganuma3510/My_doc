## Solutions Architect

- [Solutions Architect](#solutions-architect)
  - [VPC](#vpc)
  - [Direct Connect](#direct-connect)
  - [Route53](#route53)
  - [S3 (Simple Storage Service)](#s3-simple-storage-service)
  - [EFS](#efs)
  - [EBS (Elastic Block Store)](#ebs-elastic-block-store)
  - [Auto Scaling](#auto-scaling)
  - [AWS Storage Gateway](#aws-storage-gateway)
  - [Amazon EFS (Amazon Elastic File System)](#amazon-efs-amazon-elastic-file-system)
  - [Amazon FSx For Lustre](#amazon-fsx-for-lustre)
  - [IAM](#iam)
  - [AWS Organizations](#aws-organizations)
  - [AWS DataSync](#aws-datasync)
  - [Amazon SQS (Simple Queue Service)](#amazon-sqs-simple-queue-service)
  - [AWS Config](#aws-config)
  - [RDS](#rds)
  - [DynamoDB](#dynamodb)
  - [CloudFront](#cloudfront)
  - [Redshift](#redshift)
  - [ELB (Elastic Load Balancer)](#elb-elastic-load-balancer)
    - [ALB (Application Load Balancer)](#alb-application-load-balancer)
    - [NLB (Network Load Balancer)](#nlb-network-load-balancer)
  - [EC2](#ec2)
  - [ECS](#ecs)
  - [Lambda](#lambda)
  - [Amazon Kinesis](#amazon-kinesis)
  - [CloudWatch](#cloudwatch)
  - [CloudFormation](#cloudformation)
  - [Amazon Elasticserch Service](#amazon-elasticserch-service)
  - [AWS OpsWorks](#aws-opsworks)
  - [AWS Application Discovery Service](#aws-application-discovery-service)
  - [CloudTrail](#cloudtrail)
  - [AWS Systems Manager](#aws-systems-manager)
  - [AWS KMS (Key Management Service)](#aws-kms-key-management-service)
  - [AWS CloudTrail](#aws-cloudtrail)
  - [Amazon SNS](#amazon-sns)
  - [AWS Snowball](#aws-snowball)

### VPC
- VPC間のデータ転送料  
プライベートIPアドレスは、データ転送料金はかからない。

- NATゲートウェイ作成後のルートテーブル  
NATゲートウェイ作成後はプライベートサブネットのルートテーブルを更新して、トラフィックをNATゲートウェイと関連づける必要がある。

- API Gateway  
API Gatewayより背後の複数のバックエンドサービスに単一のインターフェースを提供することで、基盤のサービスから切り離すことができる。  
またキャッシュを有効にすることで、エンドポイントへの呼び出し数を減らすことができリクエストのレイテンシーを低減することができる。

- クラスタープレイスメントグループ  
単一のAZ内のインスタンスを論理的にグループ化することができる。  
インスタンス間で頻繁に通信する必要があり、低レイテンシーと高スループットのネットワークパフォーマンスを必要とする際に適している。

- 拡張ネットワーキング  
HVM 仮想化上のVPC内でのみ動作し、複数AZにまたがるクラスターの低レイテンシーと高ネットワークパフォーマンスを提供する。

- PrivateLink  
AWSへのAPIアクセスをインターネットを経由せずに行えるインターフェースタイプのVPCエンドポイントのこと。

- VPCエンドポイント  
インターネットを経由せずに異なるVPCやサービス間の通信を行うことができる。  
  - ゲートウェイエンドポイント  
  S3とDynamoDBのみが対応しており、ゲートウェイ経由でサービスへアクセスする。  
  またDynamoDBにアクセスするにはルートテーブルのエントリを追加する必要がある。
  - インターフェースエンドポイント  
  PrivateLinkを使用するサービスに接続できる。

- インターリージョンVPCピアリング  
異なるAWSリージョンにあるVPC同士をプライベートに接続ができるマネージドサービス。  
別のリージョンのEC2やRDSにプライベートに接続したい際に使用する。

- Virtual Private Gateway (仮想プライベートゲートウェイ：VGW)  
オンプレミスとAWSをプライベートで繋げる際に使用するAWS側のゲートウェイ。  
オンプレミス環境とDirect ConnectもしくはVPNを繋げる際などに利用する。

- Customer Gateway  
オンプレミス環境と接続をする際にユーザー側のルーター情報を登録する際に使用するゲートウェイ。  
VPNなどを使用する際は、ユーザー側に配置し、VPCルートテーブルにルーティング設定などを行う必要がある。

- Transit Gateway  
VPC間およびVPCとオンプレミスネットワークを相互接続するために使用できるネットワークの中継ハブのこと。

- ENIにライセンスを関連付ける  
インスタンスを起動する最初の一回だけ実行されるブートストラップを利用して、プールからENIをアタッチすることができる。  

### Direct Connect
- 冗長化  
同じVGWを使用してDirect ConnectとVPNを構築することができ、デフォルトではDirect Connectが優先されるため、冗長性が実現できる。

- セキュアな通信  
既存のDirect Connectの回線を使用してVPN接続を構築することで、専用線接続の通信を暗号化できるため、非常にセキュアな通信を実現できる。

- パブリック仮想インターフェイス  
パブリックIPアドレスを使用して、S3などのAWSパブリックサービス（非VPCサービス）にアクセスすることができる。

- プライベート仮想インターフェイス（VIF）  
プライベートIPアドレスを使用してVPCにアクセスすることができる。

- DX接続でVPNを確立する  
Direct Connect接続用のパブリック仮想インターフェイスを作成することで実現可能。

- Direct Connectゲートウェイ  
プライベート仮想インターフェイスを介して、１つ以上のVPC（リージョンを越えることも可）に接続することができる。

### Route53
- エイリアスレコード  
Route 53のDNS拡張機能であり、IPアドレスの代わりにAWSのリソースにルーティングすることができる。

- ホストゾーン  
ホストゾーンとはドメインおよびサブドメインのトラフィックのルーティングする方法についての情報を保持するコンテナこと。
  - パブリックホストゾーン  
  インターネット上で名前解決をする。
  - プライベートホストゾーン  
  設定したVPC内のみ、名前解決をすることができる。

- 加重ルーティングポリシー  
指定した重量（比率）で複数リソースにトラフィックをルーティングすることができ、負荷分散が可能。

- 位置情報ルーティングポリシー  
ユーザーの地理的場所（DNSクエリの送信元）に基づいて複数リソースにトラフィックをルーティングすることができ、負荷分散が可能。

- フェイルオーバールーティングポリシー  
リソースが正常な場合にトラフィックをルーティングする。
  - フェイルオーバー（アクティブ/アクティブ）  
  複数のリソースがあった場合に分散してルーティングを行う。
  - フェイルオーバー（アクティブ/パッシブ）  
  プライマリリソースとセカンダリリソースを登録することで、プライマリに異常があった場合にセカンダリリソースへルーティングを行う。

- レイテンシールーティングポリシー  
ネットワークレイテンシーが最も低いリソースにトラフィックをルーティングする。  
これによりエッジロケーションへのルーティングが可能。

- 複数値回答ルーティングポリシー  
DNSクエリに対する応答として複数の値（WebサーバーのIPアドレスなど）を設定できる。  
完全にランダムなルーティングをしたい際などにも使用される。

- 正常なALBにルーティング  
ALBエンドポイントのEvaluate Target Health を有効にすることで、ALBの正常性ステータスをチェックすることができ、正常なALBにルーティングが可能。

- プライベートホストゾーンを別のAWSアカウントのVPCに関連づける  
関連づけたいアカウントのプライベートホストゾーンを別のAWSアカウントVPCに関連づけるための認証を作成し、別のアカウントのVPCを関連づけたいアカウントのホストゾーンに関連づける。

### S3 (Simple Storage Service)
- S3 標準  
頻繁にアクセスするデータの保存に適している。  
- S3 標準 - 低頻度アクセス (S3 標準 -IA)  
アクセス頻度は低いが、必要に応じてすぐに取り出す際に適している。  
取り出す際にGB辺りに料金が発生する。
バックアップ、災害対策ファイルなどに最適。
- S3 1 ゾーン – 低頻度アクセス (S3 1 ゾーン – IA)  
アクセス頻度は低いが、必要に応じてすぐに取り出す際に適している。  
ひとつの AZ にデータを保存するため、S3 標準 – IA よりもコストを 20% 削減できる。
- S3 Glacier
  - 迅速取り出し  
  通常1〜5分で使用可能。
  - 標準  
  通常3〜5時間で使用可能。
  - Deep Archive  
  通常5〜12時間で使用可能。
- S3 Intelligent-Tiering  
未知のアクセスパターンやアクセスが変化するストレージパターンに最適。
- S3 Transfer Acceleration  
異なる地域からS3の高速データ転送が可能になる。  
世界中からアップロードされる、大陸間でGBからTB単位のデータ転送をする、アップロード時にインターネット経由で利用可能な帯域幅を十分に活用できていない際などに使用が推奨されている。

- ライフサイクルポリシー  
ライフサイクルを設定することでコスト効率を上げることができる。
  - 移行アクション  
  別のストレージクラスにオブジェクトを移行することができる。  
  例：30日経過後、S3 Glacierにアーカイブなど
  - 有効期限アクション  
  有効期限切れのオブジェクトを削除する。

- クロスリージョンレプリケーション  
S3のクロスリージョンレプリケーションを有効にすることで、複数のリージョン間でデータを複製することができる。  
また、レプリケーションを有効にするにはバケットでバージョニングを有効にする必要がある。

- CORS  
オリジン（protocol + domain + port『例：https://yahoo.co.jp:443』）間リソース共有のこと。  
あるオリジンで動いている Web アプリケーションに対して、別のオリジンのサーバーへのアクセスをHTTPリクエストによって許可できる仕組みのこと。  
[なんとなく CORS がわかる\.\.\.はもう終わりにする。 \- Qiita](https://qiita.com/att55/items/2154a8aad8bf1409db2b)

- 署名付きURL  
有効期限付きのURLを生成できるため、ユーザーがIAMユーザーである必要がなく、オブジェクトのアップロードが可能。  
また、アプリケーション経由でルーティングする必要がなく、S3へ直接アクセスできる。

- S3ファイルゲートウェイ  
NFSプロトコルをサポートしており、ローカルキャッシュを使用してデータへの低レイテンシーアクセスを提供する。
データへの低レイテンシーアクセスを維持したまま、オンプレからAWSへ移行したい際に利用する。

- MFA Delete  
この設定を有効にするとバケット所有者は特定のバージョンの削除や変更をする際に、2つの認証形態を含める必要がある。  
これにより誤った削除を防ぐことができる。

- 成功ステータスコード  
S3は格納の成功時にHTTPステータスコード200を返す。  
また、データの破損検出のためContent-MD5チェックサムと周期的冗長検査（CRC）を組み合わせて使用している。

- S3の暗号化  
  - サーバ側の暗号化  
  オブジェクトをAWSのデータセンター内のディスクに保存する際に暗号化を行う。  
  鍵の管理方法にはクライアントが管理する方法（SSE-C）、AWS側で管理する方法（SSE-KMS、SSE-S3）がある。
  - クライアント側の暗号化  
  クライアント側で暗号化したものをS3にアップロードする。この場合、クライアント側で暗号化のプロセスやキーを管理する必要がある。

- バケットポリシー  
S3のリソースにアクセス許可を付与するために使用する機能。  
複数のアカウント（クロスアカウント）でバケットを共有することができる。

- aws s3 コマンド  
AWS CLIを使用して`aws s3 cp`コマンドを実行することで、マルチパートアップロードを行うことができる。  
これによりアップロードの時間を短縮、および失敗時の再アップロードの試みを簡単に行うことができる。

- データを転送する際の通信を暗号化する  
S3のバケットポリシーにてHTTPの接続を拒否に設定るすことで、HTTPSで通信することが可能。

- データ転送料をリクエストタに請求する  
リクエスタ支払い機能を有効にすることで、バケットへのリクエストおよびデータのダウンロードにかかるコストをリクエスタが支払うように変更する事ができる。

- Range Get  
オブジェクトをいくつかに分けて取得する事ができ、特定のバイト範囲を指定して取得する事が可能。

### EFS
- 保存時と転送時のデータ暗号化  
保存時の暗号化と転送時の暗号化をサポートしており、保存時の暗号化はEFSファイルシステムを作成する際に有効する必要があり、転送時の暗号化は作成後、ファイルシステムをEC2インスタンスにマウントする際、有効にする事ができる。

### EBS (Elastic Block Store)
どんな規模のワークロードにも対応でき、独自のファイルシステムも作成可能。  

- EBSスナップショット  
スナップショットを作成している間も読み書きすることが可能。  
自動的に暗号化され、最後に作成した時点から変更のあるブロックのみ保存する増分バックアップを行う。

- EBS暗号化  
暗号化されていないリソースの暗号化を行うには、暗号化を有効にしたボリュームに暗号化されていないスナップショットを復元することで暗号化を行う。
EBSの暗号化では、独自のキー管理インフラストラクチャを構築、保守、保護する必要がなく、暗号化されたボリュームとスナップショットを作成する際は、AWS KMS keysを使用する。  

- ストレージオプション  
ボリュームサイズを増やすことで、IOPSをあげることが出来る。
  - プロビジョンド IOPS SSD (io1)  
  OLTPの要件に最適。
  - 汎用SSD (gp2)  
  - スループット最適化 HDD (st1)  
  - Cold HDD  

- RAID 0  
単一のAmazon EBSボリュームでプロビジョニングする場合よりも、ファイルシステムで高パフォーマンスを実現できる。  
I/O パフォーマンスが最も重要視される場合に使用する。

- DeleteOnTermination  
EC2インスタンスを削除した際に、接続されたEBSボリュームを保持することができる。

### Auto Scaling
自動的にリソースをスケールさせることができるサービス。  

- Auto Scaling グループ  
同じリージョン内の複数AZからEC2インスタンスなどを含めることができる。
ELBのヘルスチェック（正常に稼働しているかをチェック）によってインスタンスのヘルスを判断することも可能。

- AZRebalance  
AZのインスタンス数を均等にするように自動的に再分散する機能。
Launchプロセスを停止することで、新しいインスタンスの起動も、既存のインスタンスの削除も行わない。

### AWS Storage Gateway
- ボリュームゲートウェイ  
iSCSIProtocolを使用してブロックストレージを提供し、AWS上にストレージを拡張することができる。
  - キャッシュ型モード  
プライマリデータはS3に保存され、**頻繁にアクセスするデータ**はキャッシュでローカルに保持される。  
データを全てS3に保存して、よく使うデータのみローカルでキャッシュしておくイメージ。またストレージの拡張を最小限に抑える。
  - 保管型モード  
プライマリデータはローカルに保存され、**データセット全体**が低レイテンシーにアクセス可能になる。非同期にAWSにバックアップされる。  
ローカルにデータを残したままAWSにバックアップするイメージ。

- ファイルゲートウェイ  
業界標準のファイルプロトコル（NFS、SMBなど）を使用し、ファイルをオブジェクトとしてS3に保存、アクセスするためのファイルインターフェースを提供している。  

### Amazon EFS (Amazon Elastic File System)
ストレージをプロビジョニングまたは管理することなくファイルデータを共有できる完全マネージド型ファイルストレージサービス。  
アプリケーションの変更を必要とせず、複数のインスタンスから同時にアクセスできる。  

- POSIX準拠  
Amazon EFSは、POSIX準拠の伸縮自在な共有ファイルストレージを提供する。

### Amazon FSx For Lustre
ワークロードの高速処理に最適化された高性能ファイルシステムを提供するフルマネージド型サービス。  
機械学習、高性能コンピューティング、ビデオ処理、財務モデリング、電子設計自動化、分析などのワークロード向けに最適化されたファイルシステム。  
S3バケットとリンクすることもできる。並列処理も可能。

### IAM
- クロスアカウントアクセス  
AのアカウントからアカウントBのリソースを管理することができる。  
IAMユーザーに自身または他のAWSアカウントで定義されたロールに切り替えるアクセス許可を付与することができる。  
これにより、別のAWSアカウントの設定やリソースの監査などができる。

- ウェブIDフェデレーション  
一時的な認証情報を外部 ID プロバイダー（例: Login with Amazon、Facebook、Google）を使用してサインインし、その認証トークンをAWSアカウントのリソースを使用するためのアクセス許可を持つIAMロールにマッピングし、AWS の一時的セキュリティ認証情報に変換することができる。  
これを利用し、モバイルアプリなどでAWSリソースにアクセスすることができる。

- PowerUserAccess 管理ポリシー  
開発者用のポリシーで、IAMおよびOrganizations以外の全てのアクションを許可する権限を持っている。

### AWS Organizations
- サービスコントロールポリシー (SCP)  
組織のすべてのアカウントで使用可能な最大アクセス許可を一元的に制御することができる。  
SCPでの制限は適用したOUに含まれるアカウント全てのIAMに対して有効になるため、最終的にSCPとIAMで許可された権限が有効となる。

### AWS DataSync
オンプレミスからAWS（Amazon S3 / Amazon EFS）間、およびAWSストレージサービス間でのデータの移動を簡素化、自動化、高速化するマネージド型のデータ転送サービス。

### Amazon SQS (Simple Queue Service)
サーバーレスでキューイングを実現できるフルマネージドキューイングサービス。  

- 可視性タイムアウト  
可視性タイムアウトの時間内は他のメッセージを受け付けないようにする設定。  
受信されたメッセージが重複しないようにする設定。

- 受信メッセージ待機時間  
ロングポーリングを有効にすることで、返却するデータがない場合、設定した時間SQSが待機するため空のレスポンス件数を減らすことができ、かつコストを削減することができる。

- スケーリング
メッセージを永続的に保存する機能を備えた疎結合アーキテクチャの設計に役立つ。  
SQSキューの需要に応じてAuto Scalingグループをスケールすることができる。

- ApproximateNumberOfMessages  
ApproximateNumberOfMessagesはキューから取得可能なメッセージのおおよその数を取得することができ、これを利用することによりAuto scaling でスケールイン、スケールアウトが可能になる。

- コンポーネント間の分離  
Amazon SQS メッセージキューは、他のAWSサービスとともに使用できるため、アプリケーションのスケーラビリティと信頼性を向上させることができる。  
そのため、2つのサービス間で同じ量の作業を同時にできない場合、リクエストを分離することができる。

### AWS Config
AWSリソースに対してどんな変更をしたか、時系列で変更履歴を追跡できるサービス。  
コンプライアンスに違反しているリソースの特定も可能。  

### RDS
- MySQL DBインスタンスでSSL接続  
プライマリインスタンスにSSL証明書をアタッチし、クライアントは接続に公開鍵を使用することでSSL接続をすることができる。

- IAM データベース認証  
MySQLおよびPostgreSQLで使用することができ、パスワード不要で一時的な認証トークンを使用してDBにアクセスすることができる。  
IAMデータベース認証を有効にし、認証トークンを使用するデータベースユーザーアカウントを作成する必要がある。

- シャーディング  
データを複数のデータベースに分割することで、データベースへのリクエストを分散し全体のスループットを上げることができる。

- マルチAZオプション  
シングルAZ配置のインスタンスをマルチAZオプションを指定して更新することで、ダウンタイムなしでマルチAZ配置に変換することができる。

- Aurora 読み取りエンドポイント  
読み取りエンドポイントを使用することで、複数のリードレプリカへ読み取り負荷を分散することができる。

- Aurora Serverless  
オンデマンド自動スケーリング設定を有効にすることで、DBインスタンスをニーズに基づいて自動的に起動、シャットダウン、スケールアップまたはスケールダウンされる。  
そのため、低頻度、断続的、または予測不能なワークロードに適しており、コスト効率が良い。

- スナップショットの暗号化  
暗号化されていないRDSインスタンスを変更して暗号化することはできない。そのため、暗号化するにはスナップショットを作成してから、暗号化されたスナップショットにコピーし、DBを復元する必要がある。暗号化されたスナップショットから作成されたRDSインスタンスは暗号化される。  
手順としては、暗号化されていないスナップショットを暗号化し、暗号化されたスナップショットから新しいRDSインスタンスを復元し同期、接続切り替えを行う。

- RDS for VMware  
オンプレミス環境にてRDSをvSphere上で提供するサービス。

- Aurora Global Database  
単一のデータベースを複数のリージョンにまたがって運用できる。  
また、RPO1秒、RTO1分以内に災害復旧が可能。

### DynamoDB
最大項目サイズ400KB以内のデータを処理することができ、テーブルのサイズに実質的な制限がない。  
またAuto Scalingをサポートしている。

- Auto Scaling  
スループット容量の自動管理を行い、これにより読み込み及び書き込み容量が拡張され、ドラフィックの急激な増加を処理できるようになる。  
また、ワークロードが減るとスプープットを自動的に低下させ、コストを抑えることができる。

- DynamoDB Accelerator (DAX)  
キャパシティーユニット（RCU）の削減に最適。

- DynamoDB ストリーム  
テーブル内の項目レベルの変更をキャプチャし、最大24時間のログを保存することができる。  
これによりほぼリアルタイムで変更前、変更後の内容を参照できるため、写真を追加した際に通知を送るなどの機能を実装することができる。

- パーティションキー  
RDBのプライマリキーのようなもの。データがどのパーティションに保存されているかを一意に決める。

- ソートキー  
パーティションの中で何かしらの並び替えを行う際に使用するキーのこと。

- Time To Live (TTL)  
テーブル項目の有効期限を指定して、データベースから項目を自動的に削除することができる。  
一時データや特定の期間のみ保存するデータなどを予定に従って自動的に削除できる。

- グローバルテーブル  
フルマネージドのマルチリージョン、マルチマスターのグローバルデータベースを提供する。  
選択したリージョン全体にわたってテーブルを自動的にレプリケートする。

### CloudFront
- コンテンツの更新  
CloudFrontディストリビューションでキャッシュを無効化することで、古いコンテンツを削除することができる。

- オリジンアクセスアイデンティティ (OAI)  
CloudFrontを通じてのみS3バケットから配信するコンテンツへのアクセスを制限することができる。  
これによりユーザーはS3バケットから直接ではなく、CloudFront経由でのみファイルにアクセスできるようになる。

- オリジンフェイルオーバー  
オリジングループを作成し、プライマリオリジンとセカンダリオリジンを作成することで、プライマリに異常が発生した際はセカンダリにルーティングする事ができる。

- キャッシュ動作  
ビューワーのアクセス制限（署名付きURLの使用）オプションを有効にすることで、権限のないユーザーによる不正アクセスを防ぐことができる。  
OAIと合わせて使用することで、特定のユーザーにCloudFront経由で配信することができる。

- コンテンツの地理的ディストリビューション  
地域制限機能を使用することで、ディストリビューションに関連する全てのファイルへのアクセスを制限し、国レベルでアクセスを制限することができる。

- DDos攻撃緩和  
標準でAWS Shieldが有効になっており、耐久性を高めることができる。

- SSL/TLSハンドシェイクを失敗させることなくキャッシュヒット率を高める  
Hostヘッダーを保持したまま、静的と動的コンテンツの２つのキャッシュ動作を作成し、動的コンテンツにはCookieとAuthorizationヘッダーを残し、静的コンテンツでは削除することでヒット率を高めることができる。

### Redshift
ペタバイト規模のマネージド型クラウド上のデータウェアハウス。  

- クラスターの暗号化
暗号化を有効にすることで、保存時のデータを保護することができる。  
クラスターとそのスナップショットのデータブロックとシステムメタデータが暗号化される。  
クラスター起動後に暗号化を有効にすることができない。KMSを使用して暗号化することも可能。

- クロスリージョンスナップショット  
クラスターのスナップショットを別リージョンにコピーするように設定ができる。  
これにより2つのリージョンにバックアップすることができる。

- 拡張されたVPCルーティング  
上記を使用することで、インターネットを介してトラフィックをルーティングすることなく、S3などのAWSサービスにアクセスすることができる。

- ワークロード管理 (WLM)  
複数のワークロードを管理する際にジョブの優先順位を決めることができる。  
これにより、実行速度が高く処理時間の短いクエリが、処理時間の長いクエリの後に滞らないようにすることができる。

### ELB (Elastic Load Balancer)
- クロスゾーン負荷分散  
複数のAZにまたがり、全インスタンスに均等にリクエストを分散する。  
ALB、NLB対応。

- スティッキーセッション  
ALBのみ対応しており、セッションが続いている間は、同じクライアントを同じインスタンスへ誘導する。  
Auto Scalingを使用している場合、古いインスタンスにルーティングされてしまうため、ElastiCacheの方が適している。

- X-Forwarded-For (XFF)  
ロードバランサーを通過してWebサーバーへ接続したクライアントの、送信元 IP アドレスを特定することができる。  
特定のIPアドレスのみ通信を許可したい際などに使用する。

- 登録解除の遅延  
登録解除中（スケールイン中のインスタンス）のターゲットへのリクエストを停止し、登録解除完了まで待機する。  
これにより、処理中のリクエストの完了に役立つ。デフォルトは300秒。

#### ALB (Application Load Balancer)
レイヤー7で対応し、HTTP/HTTPSトラフィックをルーティングするために使用される。

- AWS Global Accelerator  
ALB、NLBの前面に配置することで、低レイテンシーと高可用性を提供する。

- 登録解除の遅延  
ALBは応答がないインスタンスへのリクエストを停止するが、そのタイムアウト時間を遅延させることができる。

- プライベートのインスタンスにアタッチ  
インスタンスがあるAZにパブリックサブネットを作成し、ALBに関連付ける。そのためパブリックサブネットが2つ必要になる、。

- パスベースのルーティング  
URLのパスに基づいてリクエストを別のターゲットにルーティングするリスナーを作成することができる。

- アクセスログ  
クライアントIPアドレス、接続タイプ、ユーザーエージェントなどの詳細を含むアクセス情報を取得しS3に保存することができる。

#### NLB (Network Load Balancer)
レイヤー4で対応し、TCPトラフィックをルーティングするために使用される。

### EC2
- インスタンスタイプ  
さまざまなユースケースに最適化したCPU、メモリ、ストレージ、ネットワークキャパシティーの組み合わせのこと。  
主なインスタンスタイプは以下の通り。
  - Tシリーズ（T2、T3、T4）  
バーストが可能。負荷が少ないときに「CPUクレジット」を貯め、突発的に負荷が高まった際に貯めたCPUクレジットを消費して、対応することができる。  
特定の時間以外に負荷が低いワークロードに向いている。

[EC2 インスタンスタイプの種類や選び方！AWS初心者向けに今一度整理 \- ForgeVision Engineer Blog](https://techblog.forgevision.com/entry/aws-ec2-instance-bgr)

- インスタンスストア
ブロックレベルの一時ストレージを提供する。揮発性のためstopするとデータが失われる。  
インスタンスを休止状態にすると、RAMの内容がEBSルートボリュームに保存され、再起動するとRAMの内容が再読み込みされる。  
毎秒数百万回のトランザクションに対して最小のレイテンシーをサポートする。

- オンデマンドキャパシティー予約  
特定AZの任意の所要時間、確実なEC2インスタンスの起動を確保することができる。  
1年間４時間のみジョブを実行するなどといった要件に最適。

- インスタンスプロファイル  
EC2インスタンスとIAMロールを結びつけるための箱のこと。  
インスタンスの起動時に EC2 インスタンスにロール情報を渡すために使用する。

[インスタンスプロファイルを理解するついでにポリシーとロールを整理する。 \- Qiita](https://qiita.com/sakai00kou/items/a4b96dcfa6bb3e656cd9)

- スポットインスタンスの中断  
スポットインスタンスが中断された際に、リクエストタイプをpersistentにし、EBSを使用することで、インスタンスの終了を防ぐことができる。

- スポットインスタンスのリクエストタイプ（ワンタイム）の削除  
ワンタイムのリクエストタイプの場合はキャンセルする必要がなく、インスタンスを終了するとリクエストも終了するためキャンセルする必要がない。

- スポットフリート  
Spotインスタンスの買い方の一種で、条件を指定（インスタンス数やvCPU数、最高価格など）するとAWSがEC2のSpotインスタンスの価格を監視、条件に合ったEC2を見つけ出して起動、廃棄または停止を自動で行う。

- EC2インスタンスの削除保護  
DisableApiTermination属性を有効にすることで、偶発的な削除を防ぐことができる。

- AMIを別リージョンにコピー  
AMIを別のリージョンにコピーすることで新しいインスタンスをコピー先のリージョンで起動することができる。

- リンクローカルアドレス  
APIPAというコンピュータがDHCPサーバーではなく自己でIPアドレスを割り当てる際に使用されるIPアドレスのこと。  
インスタンスメタデータを参照するにはリンクローカルアドレス（169.254.0.0~）を使用する。

### ECS
- EFSファイルシステムサポート
ECS on FargateのタスクはEFSのファイルシステムをマウントできる。

- 動的ポートマッピング
ALBで動的ポートマッピングを使用することで、1ホストに複数のタスク（コンテナの環境）をロードバランスすることができる。

- IAMロール  
タスクにIAMロールを割り当てることができる。

- awsvpcネットワークモード  
起動されるタスクごとにENIを持つことができ、かつENIにセキュリティグループを割り当てることができる。

### Lambda
- 最大実行時間  
Lambdaの最大実行時間は15分となっている。

- オーソライザー  
ユーザー認証にて3回認証に失敗した際に、1時間アクセスを拒否させることができる。

- Lambda@Edge  
Cloudfrontのエッジロケーション（エッジサーバー）からコードを実行できるLambda関数のこと。  
ユーザーに近い場所でコードが実行されることでアプリケーションのパフォーマンスが向上する。  
以下をイベントとして関数を実行する事ができる。
1. ビューワーリクエスト
2. ビューワーレスポンス
3. オリジンリクエスト
4. オリジンレスポンス

- 同時実行数の管理  
関数の予約された同時実行制限を設定することができ、これにより関数が予約された同時実行数のインスタンスを使用している場合、他の関数は実行されないようにできる。

- カナリアデプロイ  
バージョンごとにエイリアスを作成し、トラフィックをシフトすることで新しいバージョンの関数にルーティングすることができる。  
また、CodeDeployを使用し、トラフィックを徐々に新しいバージョンに移行することができる。

- パフォーマンスの向上  
メモリを増やすことで、比例してCPUパワーが直線的に割り当てられる。  
また、実行環境を再利用することで、パフォーマンスとコスト効率が向上する。

### Amazon Kinesis
ストリーミングデータをリアルタイムで収集、処理、分析することができる完全マネージド型サービス。  
毎秒ギガバイトのデータを継続してキャプチャすることができる。リアルタイムで取り込めるデータは以下の通り。
- 機械学習
- 動画
- 音声
- アプリケーションログ
- ウェブサイトのクリックストリーム
- IoT テレメトリーデータ

Kinesisに以下の4つの機能がある。
- Kinesis Video Streams  
動画を簡単かつ安全にストリーミングできるサービス。
- Kinesis Data Streams  
数十万規模のソースから秒あたり数ギガバイトものストリームデータを受けることができるサービス。  
デフォルトでは24時間のみデータを保存し、最大7日間まで保存することができる。
- Kinesis Data Firehose  
ストリームデータをS3やRedshift、ESなどのツールを使用してリアルタイムで分析ツールにできるサービス。
- Kinesis Data Analytics  
SQLやApache Finkでストリームデータをリアルタイムで処理できるサービス。

- Lambda統合  
Lambda関数を使用して、Kinesisデータストリームのレコードを処理または変換することができる。  
データをキャプチャ時に処理または変換をしてから、DBやS3に保存することが可能。

[Amazon Kinesis（ストリーミングデータをリアルタイムで収集、処理、分析）\| AWS](https://aws.amazon.com/jp/kinesis/)  
[Kinesis Data Firehoseを使ってみた話 \- Qiita](https://qiita.com/arata-honda/items/a21c5985f25ec337efbf)

- スループット向上  
UpdateshardCountコマンドを使用することで、データストリーム内のシャード数を増やすことができ、スループットを向上させることができる。

### CloudWatch
- CloudWatch Logs  
EC2インスタンス、CloudTrail、Route53などのログファイルの監視、保存、アクセスを行うことができる。

- CloudWatchエージェント  
設定に基づいてログを収集し、CloudWatch Logsに送信して集約し、エラーの識別とアラートの送信ができる。
オンプレミス環境のサーバーにインストールすることも可能。

- 利用料金の監視とアラームの設定  
CloudWatchの請求アラームとAWS Budgetsの予算アラートを使用することで、利用料金が設定した金額を超えた場合に、アラートを設定する事ができる。

- サブスクリプションフィルター
CloudWatch Logs サブスクリプションを作成して、Amazon Kinesis Data Firehose 送信ストリーミングに定義されたフィルタに一致する受信ログイベントを送信することができる。

### CloudFormation
- 別リージョンにデプロイ  
--region パラメータを指定して、別リージョンにデプロイすることができる。

- StackSets  
複数のアカウントおよびリージョンのスタックを1度のオペレーションで、作成・更新・削除ができる。  
これにより、複数のアカウントおよびリージョンへスタックを1度のオペレーションで自動デプロイすることが可能。

- AMIの更新  
CloudFormationはAMIの更新をネイティブにサポートしており、Auto Scalingにて新しいインスタンスを起動後、UpdatePolicy属性を指定することで、インスタンスを入れ替えることができる。

- クロススタック  
スタックから別のスタックへ渡すパラメータの量を減らすことができる。

### Amazon Elasticserch Service
- CloudWatch Logsデータのストリーミング  
ESドメイン（クラスタと同義）を作成し、クラスターにほぼリアルタイムでデータをストリーミングする事ができる。

- オンプレミスからクラスターの移行  
Elasticserchインデックスをエクスポートし、Amazon ESクラスターにインポートすることができる。

### AWS OpsWorks
- CloudFormationとの併用  
CloudFormationテンプレート内で、OpsWorksコンポーネントを使用する事ができ、CloudFormationスタックとしてプロビジョニングが可能。

### AWS Application Discovery Service
- AWS Agentless Discovery Connector  
VMware 仮想マシン (VM) に関する情報のみを収集できる VMware アプライアンス。

### CloudTrail
- ログの暗号化  
S3へサーバー側の暗号化を使用することができ、デフォルトで暗号化が有効になっている。

- ログファイルの整合性の検証  
ログファイルの検証を有効にすることで、不変的な監査ログの用件に役立つ。  
また、AWS KMSで管理されたキーを使用し、暗号化をすることもできる。

### AWS Systems Manager
- Systems Managerメンテナンスウィンドウ  
OSのパッチ適用、ドライバーの更新、ソフトウェアやパッチのインストールなど、インスタンスに対して破壊的になり得るアクションを実行するスケジュールを定義できる。

- Patch Manager  
OSとアプリケーションのパッチ適用を自動化できる。  
SSMエージェント（Systems Managerエージェント）をインスタンス、またはオンプレミスのサーバーにインストールする必要がある。  
また、パッチベースラインというパッチ適用の際のルールを定義するものがあり、OSごとに事前定義済みのAWS-DefaultPatchBaselineというパッチベースラインがある。

- Session Manager  
ブラウザベースでEC2インスタンスに安全に接続することができる。

- パラメータストア  
設定データ管理と機密管理のための安全な階層型ストレージを提供する。  
パスワード、データベース文字列、Amazon Machine Image (AMI) ID、ライセンスコードなどのデータをパラメータ値として保存することができる。

### AWS KMS (Key Management Service)
データを暗号化するためのキーを作成および管理することができるサービス。  

- キーアクセス  
キーポリシーを使用することで、カスタマーマスターキー（CMKs）へのアクセスを制御することができる。  
またAWS CloudTrailと統合されており、すべてのキーの使用ログを表示できる。

### AWS CloudTrail
- ログファイルの暗号化と整合性  
CloudTrailはデフォルトでS3のログを暗号化し、ログファイルの整合性検証を行うことができる。

### Amazon SNS
- トピック  
配信対象をグルーピングし、一斉に通知を配信するための機能。  
エンドポイントを登録（複数登録可）することで、トピックに登録されているエンドポイントへ通知を配信できる。  

- サブスクリプション  
作成したトピックと配信対象のエンドポイントを紐づけるデータ。

- パブリッシュ（発行）  
エンドポイントやトピックに対し、通知を配信すること。

[Amazon SNSでプッシュ通知を送るための基礎知識 \| UNITRUST](https://www.unitrust.co.jp/6182)

- SNSモバイルプッシュ  
モバイルアプリケーションに送信するには、プラットフォームエンドポイントを作成し、直接通知メッセージを送信する。

### AWS Snowball
- S3 Glacierへデータ転送する場合  
S3 Glacier ボールトのサポートはされていないため、S3バケットを宛先として選択し、Glacierへ移行するライフサイクルポリシーを作成する必要がある。

- Snowball Edgeを使用したローカル処理とコンビューティングワークロードの実行  
AWS間のデータ転送だけでなく、ローカル処理とコンビューティングワークロードの実行なども提供している。  
そのため、PCの処理不足やネットワーク接続が不安定な場合、代わりのデバイスとして利用できる。